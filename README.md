# Generative-Artificial-Intelligence-Crawling

This repository contains my solution for **NYCU Generative Artificial Intelligence – Homework 4: Crawling**. The goal is to crawl all posts on PTT Beauty board for year 2024 and provide four CLI functions: `crawl`, `push`, `popular`, and `keyword`. 

## Assignment Summary

You should submit **one Python file** named `{student_id}.py`. The script must support the following commands:

- `crawl`  
- `push {start_date} {end_date}`
- `popular {start_date} {end_date}`
- `keyword {start_date} {end_date} {keyword}`

Dates use **MMDD** format (e.g., `0304`, `1231`). All operations other than `crawl` are based on the outputs generated by `crawl`. 

## Environment & Dependencies

Target environment (as specified by the course):

- Ubuntu 24.04
- Python 3.12.x  
- Only standard libraries and the allowed third-party packages (e.g., `requests`, `beautifulsoup4`, `tqdm`, etc.). 

This implementation uses:
- `requests`
- `beautifulsoup4`
- `tqdm`
- `concurrent.futures` (standard library)

## Files

- `112101014.py` — main implementation (rename to your student ID when submitting). 
- `eval.py` — official/TA-provided evaluation script for local checking. 
- `hw4.pdf` — assignment specification. 
## Usage

> Before running other commands, run `crawl` once to generate:
> - `articles.jsonl`
> - `popular_articles.jsonl`

### 1) Crawl

Crawl all valid Beauty posts in 2024 and output:

- `articles.jsonl`
- `popular_articles.jsonl`

```bash
python 112101014.py crawl
````

Filtering rules include ignoring announcement posts and empty/missing titles.  

### 2) Push

Compute push/boo statistics within the date range and output:

* `push_{start_date}_{end_date}.json`

```bash
python 112101014.py push 0304 1231
```

Top 10 ranking rule:

* Sort by `count` descending.
* If tie, sort by `user_id` in **descending lexicographical order**.  

### 3) Popular

Find popular (“爆”) articles within the date range and collect **all image URLs** from both content and comments:

* `popular_{start_date}_{end_date}.json`

```bash
python 112101014.py popular 0304 1231
```

Image URL definition:

* Starts with `http://` or `https://`
* Ends with `.jpg`, `.jpeg`, `.png`, `.gif` (case-insensitive).  

### 4) Keyword

Find articles whose **main content** contains the keyword within the date range and collect all image URLs:

* `keyword_{start_date}_{end_date}_{keyword}.json`

```bash
python 112101014.py keyword 0304 1231 正妹
```

This implementation follows the spec where the keyword output includes an `image_urls` list. 

## Implementation Notes

* Uses the `over18` cookie to bypass age-check pages when requesting PTT content. 
* Employs `ThreadPoolExecutor` with `os.cpu_count()` workers to speed up comment/image parsing for `push`, `popular`, and `keyword`. 
* Image URLs are extracted via a regex that matches common image extensions. 
* The crawler uses anchor posts to locate the 2024 range and iterates Beauty index pages in a predefined interval. This may need adjustment if PTT index numbering shifts significantly. 

## Local Evaluation

If you have the TA’s answer directory structure, you can test like:

```bash
python eval.py 2023_answer outputs
```

The checker calculates overlap/IOU-based scores for each task.  

## Output Formats (Quick Reference)

### articles.jsonl / popular_articles.jsonl

Each line is a JSON object:

```json
{"date": "MMDD", "title": "...", "url": "..."}
```

### push_{start}_{end}.json

```json
{
  "push": {"total": 0, "top10": [{"user_id": "...", "count": 0}]},
  "boo":  {"total": 0, "top10": [{"user_id": "...", "count": 0}]}
}
```

### popular_{start}_{end}.json

```json
{
  "number_of_popular_articles": 0,
  "image_urls": ["..."]
}
```

### keyword_{start}*{end}*{keyword}.json

```json
{
  "image_urls": ["..."]
}
```

---

### Disclaimer

PTT content (push counts, deleted posts, new comments) can change over time, so local results may differ from the official grading run. 
